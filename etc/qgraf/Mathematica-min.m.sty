<prologue>
(* <program> output:
  Mathematica style (version 19.03.2012)
  by Jens Hoff (jens@particle.uni-karlsruhe.de)
*)

(* qgraf.dat statements:
<command_loop>
<back>  <command_line_loop><command_data><back><end>
<end>
*)

(* enter message *)
text = "starting to read diagrams ...";
If[[$FrontEnd === Null,
  WriteString[["stdout", text <<>> "\n"]],
  PrintTemporary[[text]];
]];

dias = {
<diagram>
  {
    name ->> "D<diagram_index>",
    prop ->> {
<propagator_loop>
<back>      {
<back> "<field>",
<back> <momentum>,
<back> <vertex_index>*5+<ray_index>,
<back> <dual-vertex_index>*5+<dual-ray_index>
<back> },
<end><back><back>
    },
    extl ->> {
<in_loop>
<back>      {
<back> "<field>",
<back> <momentum>,
<back> in[[<in_index>]],
<back> <vertex_index>*5+<ray_index>
<back> },
<end><back><back>,
<out_loop>
<back>      {
<back> "<field>",
<back> <momentum>,
<back> <vertex_index>*5+<ray_index>,
<back> out[[<leg_index>]]
<back> },
<end><back><back>
    }
  },
<epilogue>
  {}
};

(* delete empty element needed because of comma after last diagram *)
dias = dias[[[[;;-2]]]];

(* exit message *)
text = "saved <diagram_index> diagrams in \"dias\"";
If[[$FrontEnd === Null,
  WriteString[["stdout", text <<>> "\n"]],
  Print[[text]]
]];
<exit>
